
<!DOCTYPE html>
<!--[if IEMobile 7 ]><html class="no-js iem7"><![endif]-->
<!--[if lt IE 9]><html class="no-js lte-ie8"><![endif]-->
<!--[if (gt IE 8)|(gt IEMobile 7)|!(IEMobile)|!(IE)]><!--><html class="no-js" lang="en"><!--<![endif]-->
<head>
  <meta charset="utf-8">
  <title>schema driven nano binding - Abstraction Builder</title>
  <meta name="author" content="Bulldog">

  
  <meta name="description" content="show schema driven xml binding using nano and mxjc.">
  <meta name="keywords" content="schema driven xml binding, nano binding framework, jaxb, json binding, android">

  <!-- http://t.co/dKP3o1e -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  
  <link rel="canonical" href="http://bulldog2011.github.com/blog/2013/02/07/schema-driven-nano-binding/">
  <link href="/favicon.png" rel="icon">
  <link href="/stylesheets/screen.css" media="screen, projection" rel="stylesheet" type="text/css">
  <script src="/javascripts/modernizr-2.0.js"></script>
  <script src="/javascripts/ender.js"></script>
  <script src="/javascripts/octopress.js" type="text/javascript"></script>
  <link href="/atom.xml" rel="alternate" title="Abstraction Builder" type="application/atom+xml">
  <link href='http://fonts.googleapis.com/css?family=Lato:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <!--Fonts from Google"s Web font directory at http://google.com/webfonts -->
<link href="http://fonts.googleapis.com/css?family=PT+Serif:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">
<link href="http://fonts.googleapis.com/css?family=PT+Sans:regular,italic,bold,bolditalic" rel="stylesheet" type="text/css">

  

</head>

<body   >
  <header role="banner"><hgroup>
  <div id="logo">
  	<div id="logoLeft">{</div>
  	<div id="logoText">ab</div>
  	<div id="logoRight">}</div>
  	<div class="clear"></div>
  </div>
  <h1><a href="/">Abstraction Builder</a></h1>
  
    <h2>Building simple and elegant programming abstractions</h2>
  
  <div class="clear"></div>
</hgroup>

</header>
  <nav role="navigation"><ul class="subscription" data-subscription="rss">
  <li><a href="/atom.xml" rel="subscribe-rss" title="subscribe via RSS">RSS</a></li>
  
</ul>
  
<form action="http://google.com/search" method="get">
  <fieldset role="search">
    <input type="hidden" name="q" value="site:bulldog2011.github.com" />
    <input class="search" type="text" name="q" results="0" placeholder="Search"/>
  </fieldset>
</form>
  
<ul class="main-navigation">
  <li><a href="/">Blog</a></li>
  <li><a href="/blog/archives">Archives</a></li>
  <li><a href="/projects">Projects</a></li>
  <li><a href="/lab">Lab</a></li>
  <li><a href="/about">About Me</a></li>
</ul>

</nav>
  <div id="main">
    <div id="content">
      <div>
<article class="hentry" role="article">
  
  <header>
    
      
        <h1 class="entry-title">Schema Driven Nano Binding</h1>
      
    
    
      <p class="meta">
        








  


<time datetime="2013-02-07T20:32:00+08:00" pubdate data-updated="true">Feb 7<span>th</span>, 2013</time>
        
         | <a href="#disqus_thread">Comments</a>
        
      </p>
    
  </header>


<div class="entry-content"><p><a href="https://github.com/bulldog2011/nano">Nano</a> is a light weight xml/json binding framework targeting Android platform, in this post, I will show you how to use Nano and the accompanying compiler tool <a href="https://github.com/bulldog2011/mxjc">mxjc</a> together to do schema driven xml or json data binding - similar to the development process using JAXB and XJC.</p>

<!--more-->


<h3>The Big Picture</h3>

<p><img class="center" src="/images/nano/nano-binding.png" width="400" height="400"></p>

<p>A picture is worth a thousand words, a typical schema driven xml data binding development includes two main phases:</p>

<blockquote><ol>
<li><strong><em>Build Time</em></strong> - in this phase, we authorize xml scheam or xsd first, the schema specifies the metadata of our business domain, this is the single source of truth, later code generation all depends on the scheam, only if the scheam changes, then we need to regenerate source code. With schema specified, we use the mxjc schema binding compiler to compile the scheam into Nano bindable classes, mxjc is based on JAXB xjc, so its usage is similar to xjc. Classes generated by mxjc will be annotated with Nano annotations, these annotations specify the mapping between pojo and xml, they will later be scanned by Nano binding framework to guide the real marshalling or unmarshalling at runtime.</li>
<li><strong><em>Runtime time</em></strong> - in this phase, we have Nano bindable domain class in hand, what&#8217;s left is to do marshalling or unmarshalling according to real needs, by leveraging Nano binding framework. Nano is a middle man between XML/JSON document and java object, when objects or pojos are fed into the Nano binding framework, it can marshall them or serialize them into either XML or JSON content, and when XML or JSON content is fed into the Nano binding framework, it can unmarshall or deserialize them into objects or pojos.</li>
</ol>
</blockquote>

<p>By the way, scheam driven development is good for some scenario with complex business domain, without formal schema and automated code generation, the manual written code base will be very hard to maintain. However, when your use case is simple, it&#8217;s not necessary to begin with scheam, just write your domian class then annotate with Nano annations is also workable.</p>

<h3>A Zoo Sample</h3>

<p>I&#8217;ve create an ant project to demo the scheam driven developmeng with Nano and mxjc, you can find the project <a href="https://github.com/bulldog2011/nano/tree/master/sample/schema-driven">here</a>, you can download the whole project and run it with Ant(suppose you have Ant installed).</p>

<p>Belew is the Ant build file which includes all scheam driven development stets mentioned above:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot; standalone=&quot;yes&quot;?&gt;</span>
</span><span class='line'>
</span><span class='line'><span class="nt">&lt;project</span> <span class="na">basedir=</span><span class="s">&quot;.&quot;</span> <span class="na">default=</span><span class="s">&quot;run&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;property</span> <span class="na">name=</span><span class="s">&quot;sample.home&quot;</span> <span class="na">value=</span><span class="s">&quot;.&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;path</span> <span class="na">id=</span><span class="s">&quot;classpath&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;pathelement</span> <span class="na">path=</span><span class="s">&quot;classes&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${sample.home}&quot;</span> <span class="na">includes=</span><span class="s">&quot;lib/mxjc/*.jar&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;fileset</span> <span class="na">dir=</span><span class="s">&quot;${sample.home}&quot;</span> <span class="na">includes=</span><span class="s">&quot;lib/nano/*.jar&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/path&gt;</span>
</span><span class='line'>  <span class="nt">&lt;taskdef</span> <span class="na">name=</span><span class="s">&quot;mxjc&quot;</span> <span class="na">classname=</span><span class="s">&quot;com.leansoft.mxjc.MXJCTask&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;classpath</span> <span class="na">refid=</span><span class="s">&quot;classpath&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/taskdef&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="c">&lt;!--compile Java source files--&gt;</span>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;compile&quot;</span> <span class="na">description=</span><span class="s">&quot;Compile all Java source files&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;echo</span> <span class="na">message=</span><span class="s">&quot;Compiling the schema...&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;gen-src&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;mxjc</span> <span class="na">schema=</span><span class="s">&quot;schema/zoo.xsd&quot;</span> <span class="na">package=</span><span class="s">&quot;com.leansoft.nano.zoo&quot;</span> <span class="na">destdir=</span><span class="s">&quot;gen-src&quot;</span> <span class="na">removeOldOutput=</span><span class="s">&quot;yes&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;produces</span> <span class="na">dir=</span><span class="s">&quot;gen-src/com/leansoft/nano/zoo&quot;</span> <span class="na">includes=</span><span class="s">&quot;**/*.java&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/mxjc&gt;</span>
</span><span class='line'>    <span class="nt">&lt;echo</span> <span class="na">message=</span><span class="s">&quot;Compiling the java source files...&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;mkdir</span> <span class="na">dir=</span><span class="s">&quot;classes&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;javac</span> <span class="na">destdir=</span><span class="s">&quot;classes&quot;</span> <span class="na">debug=</span><span class="s">&quot;on&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;src</span> <span class="na">path=</span><span class="s">&quot;src&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;src</span> <span class="na">path=</span><span class="s">&quot;gen-src&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;classpath</span> <span class="na">refid=</span><span class="s">&quot;classpath&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/javac&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;run&quot;</span> <span class="na">depends=</span><span class="s">&quot;compile&quot;</span> <span class="na">description=</span><span class="s">&quot;Run the sample app&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;echo</span> <span class="na">message=</span><span class="s">&quot;Running the sample application...&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;java</span> <span class="na">classname=</span><span class="s">&quot;com.leansoft.nano.sample.ZooExample&quot;</span> <span class="na">fork=</span><span class="s">&quot;true&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>      <span class="nt">&lt;classpath</span> <span class="na">refid=</span><span class="s">&quot;classpath&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/java&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;target</span> <span class="na">name=</span><span class="s">&quot;clean&quot;</span> <span class="na">description=</span><span class="s">&quot;Deletes all the generated artifacts.&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">&quot;gen-src&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;delete</span> <span class="na">dir=</span><span class="s">&quot;classes&quot;</span> <span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/target&gt;</span>
</span><span class='line'><span class="nt">&lt;/project&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>mxjc provides an Ant task called MXJCTask, similar to xjc ant task, mxjc ant task can also auto-generate source from scheam driven by Ant.</p>

<p>Following the xml scheam(xsd):</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="nt">&lt;xsd:schema</span> <span class="na">xmlns:xsd=</span><span class="s">&quot;http://www.w3.org/2001/XMLSchema&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;zoo&quot;</span> <span class="na">type=</span><span class="s">&quot;zooInfo&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;comment&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;zooInfo&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;xsd:sequence&gt;</span>
</span><span class='line'>      <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;zooName&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;zooId&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:int&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>      <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;animals&quot;</span> <span class="na">type=</span><span class="s">&quot;Animals&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/xsd:sequence&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/xsd:complexType&gt;</span>
</span><span class='line'>
</span><span class='line'>  <span class="nt">&lt;xsd:complexType</span> <span class="na">name=</span><span class="s">&quot;Animals&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>    <span class="nt">&lt;xsd:sequence&gt;</span>
</span><span class='line'>      <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;animal&quot;</span> <span class="na">minOccurs=</span><span class="s">&quot;1&quot;</span> <span class="na">maxOccurs=</span><span class="s">&quot;unbounded&quot;</span><span class="nt">&gt;</span>
</span><span class='line'>        <span class="nt">&lt;xsd:complexType&gt;</span>
</span><span class='line'>          <span class="nt">&lt;xsd:sequence&gt;</span>
</span><span class='line'>            <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;animalName&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>            <span class="nt">&lt;xsd:element</span> <span class="na">name=</span><span class="s">&quot;animalType&quot;</span> <span class="na">type=</span><span class="s">&quot;xsd:string&quot;</span><span class="nt">/&gt;</span>
</span><span class='line'>          <span class="nt">&lt;/xsd:sequence&gt;</span>
</span><span class='line'>        <span class="nt">&lt;/xsd:complexType&gt;</span>
</span><span class='line'>      <span class="nt">&lt;/xsd:element&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/xsd:sequence&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/xsd:complexType&gt;</span>
</span><span class='line'><span class="nt">&lt;/xsd:schema&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>The XML document which we are going to read and print in console:</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
</pre></td><td class='code'><pre><code class='xml'><span class='line'><span class="cp">&lt;?xml version=&quot;1.0&quot;?&gt;</span>
</span><span class='line'><span class="nt">&lt;zoo&gt;</span>
</span><span class='line'>  <span class="nt">&lt;zooName&gt;</span>Vandalur Zoo<span class="nt">&lt;/zooName&gt;</span>
</span><span class='line'>  <span class="nt">&lt;zooId&gt;</span>12321<span class="nt">&lt;/zooId&gt;</span>
</span><span class='line'>  <span class="nt">&lt;animals&gt;</span>
</span><span class='line'>    <span class="nt">&lt;animal&gt;</span>
</span><span class='line'>      <span class="nt">&lt;animalName&gt;</span>Lion<span class="nt">&lt;/animalName&gt;</span>
</span><span class='line'>      <span class="nt">&lt;animalType&gt;</span>Wild<span class="nt">&lt;/animalType&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/animal&gt;</span>
</span><span class='line'>    <span class="nt">&lt;animal&gt;</span>
</span><span class='line'>      <span class="nt">&lt;animalName&gt;</span>Dog<span class="nt">&lt;/animalName&gt;</span>
</span><span class='line'>      <span class="nt">&lt;animalType&gt;</span>Domestic<span class="nt">&lt;/animalType&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/animal&gt;</span>
</span><span class='line'>    <span class="nt">&lt;animal&gt;</span>
</span><span class='line'>      <span class="nt">&lt;animalName&gt;</span>White Tiger<span class="nt">&lt;/animalName&gt;</span>
</span><span class='line'>      <span class="nt">&lt;animalType&gt;</span>Wild<span class="nt">&lt;/animalType&gt;</span>
</span><span class='line'>    <span class="nt">&lt;/animal&gt;</span>
</span><span class='line'>  <span class="nt">&lt;/animals&gt;</span>
</span><span class='line'><span class="nt">&lt;/zoo&gt;</span>
</span></code></pre></td></tr></table></div></figure>


<p>Following is the main java code to read the xml file, output some content, and then write the whole objects into json output.</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
<span class='line-number'>29</span>
<span class='line-number'>30</span>
<span class='line-number'>31</span>
<span class='line-number'>32</span>
<span class='line-number'>33</span>
<span class='line-number'>34</span>
<span class='line-number'>35</span>
<span class='line-number'>36</span>
<span class='line-number'>37</span>
<span class='line-number'>38</span>
<span class='line-number'>39</span>
<span class='line-number'>40</span>
<span class='line-number'>41</span>
<span class='line-number'>42</span>
<span class='line-number'>43</span>
<span class='line-number'>44</span>
<span class='line-number'>45</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="kn">package</span> <span class="n">com</span><span class="o">.</span><span class="na">leansoft</span><span class="o">.</span><span class="na">nano</span><span class="o">.</span><span class="na">sample</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.io.FileInputStream</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.leansoft.nano.IReader</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.leansoft.nano.IWriter</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.leansoft.nano.NanoFactory</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.leansoft.nano.zoo.Animals</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.leansoft.nano.zoo.ZooInfo</span><span class="o">;</span>
</span><span class='line'><span class="kn">import</span> <span class="nn">com.leansoft.nano.zoo.animals.Animal</span><span class="o">;</span>
</span><span class='line'>
</span><span class='line'><span class="kd">public</span> <span class="kd">class</span> <span class="nc">ZooExample</span> <span class="o">{</span>
</span><span class='line'>  
</span><span class='line'>  <span class="kd">public</span> <span class="kd">static</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>      <span class="k">try</span> <span class="o">{</span>
</span><span class='line'>          
</span><span class='line'>          <span class="n">IReader</span> <span class="n">xmlReader</span> <span class="o">=</span> <span class="n">NanoFactory</span><span class="o">.</span><span class="na">getXMLReader</span><span class="o">();</span>
</span><span class='line'>          
</span><span class='line'>          <span class="n">ZooInfo</span> <span class="n">zooInfo</span> <span class="o">=</span> <span class="n">xmlReader</span><span class="o">.</span><span class="na">read</span><span class="o">(</span><span class="n">ZooInfo</span><span class="o">.</span><span class="na">class</span><span class="o">,</span> <span class="k">new</span> <span class="n">FileInputStream</span><span class="o">(</span><span class="s">&quot;xml/zoo.xml&quot;</span><span class="o">));</span>
</span><span class='line'>          
</span><span class='line'>          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Output after xml read - &quot;</span><span class="o">);</span>
</span><span class='line'>          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Zoo Name: &quot;</span> <span class="o">+</span> <span class="n">zooInfo</span><span class="o">.</span><span class="na">getZooName</span><span class="o">());</span>
</span><span class='line'>          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Zoo Id: &quot;</span> <span class="o">+</span> <span class="n">zooInfo</span><span class="o">.</span><span class="na">getZooId</span><span class="o">());</span>
</span><span class='line'>      
</span><span class='line'>          <span class="n">Animals</span> <span class="n">animals</span> <span class="o">=</span> <span class="n">zooInfo</span><span class="o">.</span><span class="na">getAnimals</span><span class="o">();</span>
</span><span class='line'>          <span class="n">List</span><span class="o">&lt;</span><span class="n">Animal</span><span class="o">&gt;</span> <span class="n">animalsList</span> <span class="o">=</span> <span class="n">animals</span><span class="o">.</span><span class="na">getAnimal</span><span class="o">();</span>
</span><span class='line'>      
</span><span class='line'>          <span class="k">for</span> <span class="o">(</span><span class="n">Animal</span> <span class="n">animal</span> <span class="o">:</span> <span class="n">animalsList</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>              <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;\t&quot;</span> <span class="o">+</span> <span class="n">animal</span><span class="o">.</span><span class="na">getAnimalName</span><span class="o">());</span>
</span><span class='line'>              <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;\t\t&quot;</span> <span class="o">+</span> <span class="n">animal</span><span class="o">.</span><span class="na">getAnimalType</span><span class="o">());</span>
</span><span class='line'>          <span class="o">}</span>
</span><span class='line'>          
</span><span class='line'>          <span class="n">IWriter</span> <span class="n">xmlWriter</span> <span class="o">=</span> <span class="n">NanoFactory</span><span class="o">.</span><span class="na">getJSONWriter</span><span class="o">();</span>
</span><span class='line'>      
</span><span class='line'>          <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">.</span><span class="na">println</span><span class="o">(</span><span class="s">&quot;Output after json write - &quot;</span><span class="o">);</span>
</span><span class='line'>          <span class="n">xmlWriter</span><span class="o">.</span><span class="na">write</span><span class="o">(</span><span class="n">zooInfo</span><span class="o">,</span> <span class="n">System</span><span class="o">.</span><span class="na">out</span><span class="o">);</span>
</span><span class='line'>      
</span><span class='line'>          
</span><span class='line'>      <span class="o">}</span> <span class="k">catch</span><span class="o">(</span><span class="n">Exception</span> <span class="n">e</span><span class="o">)</span> <span class="o">{</span>
</span><span class='line'>          <span class="n">e</span><span class="o">.</span><span class="na">printStackTrace</span><span class="o">();</span>
</span><span class='line'>      <span class="o">}</span>
</span><span class='line'>  <span class="o">}</span>
</span><span class='line'>
</span><span class='line'><span class="o">}</span>
</span></code></pre></td></tr></table></div></figure>


<p>Output</p>

<figure class='code'><figcaption><span></span></figcaption><div class="highlight"><table><tr><td class="gutter"><pre class="line-numbers"><span class='line-number'>1</span>
<span class='line-number'>2</span>
<span class='line-number'>3</span>
<span class='line-number'>4</span>
<span class='line-number'>5</span>
<span class='line-number'>6</span>
<span class='line-number'>7</span>
<span class='line-number'>8</span>
<span class='line-number'>9</span>
<span class='line-number'>10</span>
<span class='line-number'>11</span>
<span class='line-number'>12</span>
<span class='line-number'>13</span>
<span class='line-number'>14</span>
<span class='line-number'>15</span>
<span class='line-number'>16</span>
<span class='line-number'>17</span>
<span class='line-number'>18</span>
<span class='line-number'>19</span>
<span class='line-number'>20</span>
<span class='line-number'>21</span>
<span class='line-number'>22</span>
<span class='line-number'>23</span>
<span class='line-number'>24</span>
<span class='line-number'>25</span>
<span class='line-number'>26</span>
<span class='line-number'>27</span>
<span class='line-number'>28</span>
</pre></td><td class='code'><pre><code class='java'><span class='line'><span class="n">Output</span> <span class="n">after</span> <span class="n">xml</span> <span class="n">read</span> <span class="o">-</span>
</span><span class='line'><span class="n">Zoo</span> <span class="nl">Name:</span> <span class="n">Vandalur</span> <span class="n">Zoo</span>
</span><span class='line'><span class="n">Zoo</span> <span class="nl">Id:</span> <span class="mi">12321</span>
</span><span class='line'>  <span class="n">Lion</span>
</span><span class='line'>      <span class="n">Wild</span>
</span><span class='line'>  <span class="n">Dog</span>
</span><span class='line'>      <span class="n">Domestic</span>
</span><span class='line'>  <span class="n">White</span> <span class="n">Tiger</span>
</span><span class='line'>      <span class="n">Wild</span>
</span><span class='line'><span class="n">Output</span> <span class="n">after</span> <span class="n">json</span> <span class="n">write</span> <span class="o">-</span>
</span><span class='line'><span class="o">{</span><span class="s">&quot;zoo&quot;</span><span class="o">:</span> <span class="o">{</span>
</span><span class='line'>    <span class="s">&quot;animals&quot;</span><span class="o">:</span> <span class="o">{</span><span class="s">&quot;animal&quot;</span><span class="o">:</span> <span class="o">[</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s">&quot;animalName&quot;</span><span class="o">:</span> <span class="s">&quot;Lion&quot;</span><span class="o">,</span>
</span><span class='line'>            <span class="s">&quot;animalType&quot;</span><span class="o">:</span> <span class="s">&quot;Wild&quot;</span>
</span><span class='line'>        <span class="o">},</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s">&quot;animalName&quot;</span><span class="o">:</span> <span class="s">&quot;Dog&quot;</span><span class="o">,</span>
</span><span class='line'>            <span class="s">&quot;animalType&quot;</span><span class="o">:</span> <span class="s">&quot;Domestic&quot;</span>
</span><span class='line'>        <span class="o">},</span>
</span><span class='line'>        <span class="o">{</span>
</span><span class='line'>            <span class="s">&quot;animalName&quot;</span><span class="o">:</span> <span class="s">&quot;White Tiger&quot;</span><span class="o">,</span>
</span><span class='line'>            <span class="s">&quot;animalType&quot;</span><span class="o">:</span> <span class="s">&quot;Wild&quot;</span>
</span><span class='line'>        <span class="o">}</span>
</span><span class='line'>    <span class="o">]},</span>
</span><span class='line'>    <span class="s">&quot;zooId&quot;</span><span class="o">:</span> <span class="mi">12321</span><span class="o">,</span>
</span><span class='line'>    <span class="s">&quot;zooName&quot;</span><span class="o">:</span> <span class="s">&quot;Vandalur Zoo&quot;</span>
</span><span class='line'><span class="o">}}</span>
</span></code></pre></td></tr></table></div></figure>


<h3>Conclusion</h3>

<p>When used properly, scheam driven development can greatly improve agaility in development, and just as I have showed in the post, Nano with mxjc supports scheam driven development smoothly, you may tell me that you would rather choose JAXB to do scheam driven development, I admit that JAXB is more mature and feature-rich than Nano, but one cool thing of Nano is it supports Android platform while JAXB does not, Nano is just tailored for Android platform, in later posts, I will show you how to practice scham driven data binding on Android platform, it&#8217;s facinating, stay tuned.</p>
</div>


  <footer>
    <p class="meta">
      
  

<span class="byline author vcard">Posted by <span class="fn">Bulldog</span></span>

      








  


<time datetime="2013-02-07T20:32:00+08:00" pubdate data-updated="true">Feb 7<span>th</span>, 2013</time>
      

<span class="categories">
  
    <a class='category' href='/blog/categories/nano/'>nano</a>
  
</span>


    </p>
    
      <div class="sharing">
  
  <a href="http://twitter.com/share" class="twitter-share-button" data-url="http://bulldog2011.github.com/blog/2013/02/07/schema-driven-nano-binding/" data-via="" data-counturl="http://bulldog2011.github.com/blog/2013/02/07/schema-driven-nano-binding/" >Tweet</a>
  
  
  
</div>

    
    <p class="meta">
      
        <a class="basic-alignment left articlenav" href="/blog/2013/02/06/nano-compare-to-jaxb/" title="Previous Post: nano compare to jaxb">&laquo; nano compare to jaxb</a>
      
      
        <a class="basic-alignment right articlenav" href="/blog/2013/02/08/nano-benchmark-on-android/" title="Next Post: nano benchmark on android">nano benchmark on android &raquo;</a>
      
    </p>
  </footer>
</article>

  <section>
    <h1>Comments</h1>
    <div id="disqus_thread" aria-live="polite"><noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
</div>
  </section>

</div>

<aside class="sidebar">
  
    <section>
  <h1>Categories</h1>
  <ul id="categories">
    <li class='category'><a href='/blog/categories/big-queue/'>big queue (7)</a></li>
<li class='category'><a href='/blog/categories/design/'>design (4)</a></li>
<li class='category'><a href='/blog/categories/ebay-api/'>ebay api (2)</a></li>
<li class='category'><a href='/blog/categories/luxun/'>luxun (2)</a></li>
<li class='category'><a href='/blog/categories/misc/'>misc (1)</a></li>
<li class='category'><a href='/blog/categories/nano/'>nano (12)</a></li>
<li class='category'><a href='/blog/categories/pico/'>pico (7)</a></li>

  </ul>
</section>
<section>
  <h1>Recent Posts</h1>
  <ul id="recent_posts">
    
      <li class="post">
        <a href="/blog/2013/04/17/nano-tutorial-2-a-barcode-sample/">Nano Tutorial 2 - a BarCode Generator sample</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/15/nano-tutorial-1-a-number-conversion-sample/">Nano Tutorial 1 - a Number Conversion Sample</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/15/wsdl-driven-development-on-android-the-big-picture/">WSDL Driven Development on Android - the Big Picture</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/03/luxun-quick-start/">luxun quick start</a>
      </li>
    
      <li class="post">
        <a href="/blog/2013/04/01/pico-and-ebay-trading-api-integration-how-to/">pico and ebay trading api integration how to</a>
      </li>
    
  </ul>
</section>






  
</aside>


    </div>
  </div>
  <footer role="contentinfo"><p>
  Copyright &copy; 2013 - Bulldog -
  <span class="credit">Powered by <a href="http://octopress.org">Octopress</a></span>
</p>

</footer>
  

<script type="text/javascript">
      var disqus_shortname = 'bulldogtech';
      
        
        // var disqus_developer = 1;
        var disqus_identifier = 'http://bulldog2011.github.com/blog/2013/02/07/schema-driven-nano-binding/';
        var disqus_url = 'http://bulldog2011.github.com/blog/2013/02/07/schema-driven-nano-binding/';
        var disqus_script = 'embed.js';
      
    (function () {
      var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
      dsq.src = 'http://' + disqus_shortname + '.disqus.com/' + disqus_script;
      (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    }());
</script>







  <script type="text/javascript">
    (function(){
      var twitterWidgets = document.createElement('script');
      twitterWidgets.type = 'text/javascript';
      twitterWidgets.async = true;
      twitterWidgets.src = 'http://platform.twitter.com/widgets.js';
      document.getElementsByTagName('head')[0].appendChild(twitterWidgets);
    })();
  </script>





</body>
</html>
